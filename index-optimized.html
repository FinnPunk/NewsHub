<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsHub - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π —Å AI</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preload" href="styles/main.css" as="style">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dock.css">
    <meta name="description" content="–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–π —Å AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4A90E2">
</head>
<body>
    <div class="app" id="mainApp">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="site-title">NewsHub</h1>
                    <nav class="breadcrumb" id="breadcrumb">
                        <span class="breadcrumb-item active">–õ–µ–Ω—Ç–∞</span>
                        <span class="breadcrumb-item">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        <span class="breadcrumb-item">–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </nav>
                </div>
                <div class="header-actions">
                    <div class="app-version" id="appVersion">v2.1.9</div>
                    <button class="btn btn--icon" id="settingsToggle" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                    <button class="btn btn--icon" id="searchToggle" title="–ü–æ–∏—Å–∫">üîç</button>
                </div>
            </div>
            <!-- Search Bar -->
            <div class="search-bar hidden" id="searchBar">
                <div class="search-input-wrapper">
                    <input type="text" id="searchInput" class="form-control" placeholder="–ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–π" autocomplete="off">
                    <button class="search-clear hidden" id="searchClear">√ó</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Quick Filters -->
            <div class="quick-filters">
                <div class="filter-chip active" data-filter="all">–í—Å—ë</div>
                <div class="filter-chip" data-filter="news">–ù–æ–≤–æ—Å—Ç–∏</div>
                <div class="filter-chip" data-filter="vk-news">VK –Ω–æ–≤–æ—Å—Ç–∏</div>
                <div class="filter-chip" data-filter="jobs">–í–∞–∫–∞–Ω—Å–∏–∏</div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn--secondary" id="refreshBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                <button class="btn btn--primary" id="filtersToggle">‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã</button>
            </div>

            <!-- Feed Container -->
            <div class="feed-container" id="feedContainer">
                <div class="loading-placeholder">
                    <div class="spinner"></div>
                    <h3>–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç...</h3>
                </div>
            </div>
        </main>

        <!-- Loading Spinner -->
        <div class="loading-spinner hidden" id="loadingSpinner">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Filters Modal -->
    <div class="modal hidden" id="filtersModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤</h3>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Job Filters -->
                <div class="filter-section">
                    <h4>üíº –§–∏–ª—å—Ç—Ä—ã –≤–∞–∫–∞–Ω—Å–∏–π</h4>
                    <div class="job-filters-grid">
                        <div class="job-filter-group">
                            <label for="jobType">–¢–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏</label>
                            <select id="jobType" class="form-control">
                                <option value="">–õ—é–±–∞—è</option>
                            </select>
                        </div>
                        <div class="job-filter-group">
                            <label for="jobCity">–ì–æ—Ä–æ–¥</label>
                            <select id="jobCity" class="form-control">
                                <option value="1">–ú–æ—Å–∫–≤–∞</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" id="cancelFiltersBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn--primary" id="applyFiltersBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        (function() {
            const theme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    
    <!-- –ú–æ–¥—É–ª–∏ -->
    <script src="js/config-optimized.js" type="module"></script>
    <script src="js/newsCardRenderer.js" defer></script>
    <script src="js/rssAggregator.js" defer></script>
    <script src="js/hhApi.js" defer></script>
    <script src="js/vkApi.js" defer></script>
    <script src="js/main.js" type="module" defer></script>
    <script src="js/ui-handlers.js" type="module" defer></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script type="module">
        import { updateAppVersion, initializeJobFiltersFromConfig, loadInitialContent } from './js/main.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é
            updateAppVersion();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
            initializeJobFiltersFromConfig();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            loadInitialContent();
            
            console.log('üöÄ NewsHub –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞!');
        });
    </script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(() => console.log('SW registered'))
                .catch(() => console.log('SW registration failed'));
        }
    </script>
</body>
</html>
